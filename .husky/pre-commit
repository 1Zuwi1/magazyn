#!/usr/bin/env sh

set -e

if [ -x "$HOME/.bun/bin/bun" ]; then
  export PATH="$HOME/.bun/bin:$PATH"
elif command -v bun >/dev/null 2>&1; then
  # bun is already available on PATH; use existing installation
  :
else
  echo "Error: Bun is not installed at \$HOME/.bun/bin and 'bun' is not found on PATH." >&2
  echo "Please install Bun (https://bun.sh) or add it to your PATH before committing." >&2
  exit 1
fi

ROOT="$(git rev-parse --show-toplevel)"
cd "$ROOT/frontend"

bunx lint-staged